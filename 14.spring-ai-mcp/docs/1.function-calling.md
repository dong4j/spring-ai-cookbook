# Function Calling

<!--
https://zhuanlan.zhihu.com/p/1897306683727910356
https://www.dailydoseofds.com/p/function-calling-mcp-for-llms/

写作思路：
- 这一篇是「问题篇」，聚焦一个主题：在没有 MCP 的年代，LLM 调用外部工具是怎么做的，它的痛点是什么。
- 通过一个统一的例子（比如 search_files / get_weather）展示：
  - OpenAI function calling 写法
  - Anthropic 工具写法
  - 其他厂商大致风格
- 然后总结三个核心问题：
	1.	各厂商格式碎片化 → 开发者要重复适配
	2.	工具发现 / 注册机制混乱 → 靠人脑堆 schema
	3.	扩展到「一堆工具」后完全失控 → 上下文、维护成本、版本演进
- 文章最后自然引入：
“有没有一种统一协议，让工具写一次，被所有模型调用？”

大纲示例：
1.	回顾第 1 篇：我们已经知道「LLM 可以通过 Spring AI 调 MCP 工具」
  - 重申：那只是我们站在 Spring AI + MCP 之后的视角
  - 为了理解 MCP 的价值，我们要先回到「只有 function calling」的时代
2.	没有 MCP 的标准做法：LLM + Function Calling 调工具
  - 以 get_weather 为例写一段 OpenAI 的完整调用流程（和你之前讨论的完整示例呼应）
  - 让读者看到：
    - 函数 schema 要嵌到 prompt 里
    - 模型输出 function_call JSON
    - 客户端解析 JSON → 调用真实函数 → 再把结果给模型
3.	多厂商时代：同一个工具要写几套 schema？
  - 使用同一个 search_files 工具，分别展示：
    - OpenAI 的 schema
    - Anthropic 的 schema（高层理解即可）
    - 其他厂商简单示意
  - 明确痛点：
    “一个工具，N 套 schema，开发者写到吐。”
4.	工具发现与管理问题
  - 没有统一协议：
    - 工具靠人手维护列表
    - 命名空间、版本、权限全靠约定
  - 当工具达到 10+、50+、100+ 时会发生什么？
    - schema 变长
    - prompt 爆炸
    - 不同模型要维护不同版本
5.	扩展性问题：从「调用一个函数」到「一个工具生态」
  - Function Calling 更像是「单机函数调用契约」
  - 企业真实需求是：
    - 文件系统
    - 日志平台
    - 各种 REST API
    - 数据库查询
  - 想象：如果这所有东西都靠手写 function schema 接到 LLM，会怎样？
6.	小结：Function Calling 的边界
  - 适合：小规模工具，单模型，demo
  - 不适合：企业内多模型、多工具、多系统的「AI 工具生态」
  - 埋下问题：
    我们需要一个「统一协议」，工具写一次，所有 LLM 都能以标准方式调用 —— 这就是 MCP 出场的舞台。

过渡到第 3 篇：

下一篇我们不急着看 Spring AI，而是回到 MCP 的“规范原点”：
- MCP 到底是什么？
- 它是怎么规范工具发现、工具调用、资源访问的？
- 如果没有 Spring AI，我们如何用官方 SDK 从零写一个 MCP Client / Server？
-->

